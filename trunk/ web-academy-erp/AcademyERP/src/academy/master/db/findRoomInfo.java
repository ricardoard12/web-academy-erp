package academy.master.db;import java.sql.Connection;import java.sql.PreparedStatement;import java.sql.ResultSet;import java.sql.SQLException;import javax.naming.Context;import javax.naming.InitialContext;import javax.sql.DataSource;public class findRoomInfo {	Connection con = null;	DataSource ds = null;	PreparedStatement pstmt = null;	ResultSet rs = null;	public findRoomInfo() {		try {			Context init = new InitialContext();			ds = (DataSource) init.lookup("java:comp/env/jdbc/p4_learntime_kr");			System.out.println("findRoomInfo DB Connected");		} catch (Exception e) {			e.printStackTrace();			System.out.println("findRoomInfo DB Connecting failed");		}	}	public String findRoom(String gp_idx){		String str=null;		try{			con=ds.getConnection();			rs=con.prepareStatement("select gp_name,gp_lev from groups where gp_idx="+Integer.parseInt(gp_idx)).executeQuery();			if(rs.next()){				String roomName=rs.getString(2);				if(roomName.equals("e")){					roomName="초등";				}else if(roomName.equals("m")){					roomName="중등";				}else if(roomName.equals("h")){					roomName="고등";				}				str=roomName+"-"+rs.getString("gp_name");			}		}catch(Exception e){			e.printStackTrace();		}finally{			dbClose();		}		return str;	}	private void dbClose() {		if (rs != null)			try {				rs.close();			} catch (SQLException e) {				// TODO Auto-generated catch block				e.printStackTrace();			}		if (con != null)			try {				con.close();			} catch (SQLException e) {				// TODO Auto-generated catch block				e.printStackTrace();			}		if (pstmt != null)			try {				pstmt.close();			} catch (SQLException e) {				// TODO Auto-generated catch block				e.printStackTrace();			}		System.out.println("findRoomInfo DB Closed");	}}